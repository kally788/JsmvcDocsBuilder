
$.extend({jsmvcUtils:new function(){var Sync=function(){this.waterfall=function(funList,result){var func=function(){var index=arguments[0];var arg1=[];for(var i in arguments){arg1.push(arguments[i]);}
arg1.splice(0,1);arg1.push(function(){var err=arguments[0];var arg2=[];for(var i in arguments){arg2.push(arguments[i]);}
if((err&&err!=0)||index+1==funList.length){result.apply(null,arg2);}else{arg2[0]=index+1;func.apply(null,arg2);}});funList[index].apply(null,arg1);}
func(0);}}
var Url=function(){var vars=null;this.getVars=function(){if(vars){return vars;}
vars={};var hash,hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&'),len=hashes.length;for(var i=0;i<len;i++){hash=hashes[i].split('=');vars[hash[0]]=hash[1];}
return vars;}
this.getVar=function(name){if(vars){return vars[name];}
return this.getVars()[name];}}
var Storage=function(){var storage={};this.get=function(key){var data=storage[key];if(!data){var json=localStorage.getItem(key);if(json){data=storage[key]=JSON.parse(json);}}
if(data){if(data.expires>0&&(Date.parse(new Date())/1000)-data.timestamp>=data.expires){this.del(key);}else{return data.value;}}
return null;}
this.set=function(key,value,expires){if(typeof expires!="number"){expires=600;}
var data={expires:expires,timestamp:Date.parse(new Date())/1000,value:value}
storage[key]=data;localStorage.setItem(key,JSON.stringify(data));}
this.del=function(key){delete storage[key];localStorage.removeItem(key);}}
var Md5=function(){var rotateLeft=function(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits;};var addUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=lX&2147483648;lY8=lY&2147483648;lX4=lX&1073741824;lY4=lY&1073741824;lResult=(lX&1073741823)+(lY&1073741823);if(lX4&lY4)return lResult^2147483648^lX8^lY8;if(lX4|lY4){if(lResult&1073741824)return lResult^3221225472^lX8^lY8;else return lResult^1073741824^lX8^lY8;}else{return lResult^lX8^lY8;}};var F=function(x,y,z){return x&y|~x&z;};var G=function(x,y,z){return x&z|y&~z;};var H=function(x,y,z){return x^y^z;};var I=function(x,y,z){return y^(x|~z);};var FF=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(F(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var GG=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(G(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var HH=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(H(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var II=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(I(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var convertToWordArray=function(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWordsTempOne=lMessageLength+8;var lNumberOfWordsTempTwo=(lNumberOfWordsTempOne-lNumberOfWordsTempOne%64)/64;var lNumberOfWords=(lNumberOfWordsTempTwo+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-lByteCount%4)/4;lBytePosition=lByteCount%4*8;lWordArray[lWordCount]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition;lByteCount++;}
lWordCount=(lByteCount-lByteCount%4)/4;lBytePosition=lByteCount%4*8;lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition;lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};var wordToHex=function(lValue){var WordToHexValue="",WordToHexValueTemp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=lValue>>>lCount*8&255;WordToHexValueTemp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValueTemp.substr(WordToHexValueTemp.length-2,2);}
return WordToHexValue;};var uTF8Encode=function(string){string=string.replace(/\x0d\x0a/g,"\n");var output="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){output+=String.fromCharCode(c);}else if(c>127&&c<2048){output+=String.fromCharCode(c>>6|192);output+=String.fromCharCode(c&63|128);}else{output+=String.fromCharCode(c>>12|224);output+=String.fromCharCode(c>>6&63|128);output+=String.fromCharCode(c&63|128);}}
return output;};this.encrypt=function(string){var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=uTF8Encode(string);x=convertToWordArray(string);a=1732584193;b=4023233417;c=2562383102;d=271733878;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,3614090360);d=FF(d,a,b,c,x[k+1],S12,3905402710);c=FF(c,d,a,b,x[k+2],S13,606105819);b=FF(b,c,d,a,x[k+3],S14,3250441966);a=FF(a,b,c,d,x[k+4],S11,4118548399);d=FF(d,a,b,c,x[k+5],S12,1200080426);c=FF(c,d,a,b,x[k+6],S13,2821735955);b=FF(b,c,d,a,x[k+7],S14,4249261313);a=FF(a,b,c,d,x[k+8],S11,1770035416);d=FF(d,a,b,c,x[k+9],S12,2336552879);c=FF(c,d,a,b,x[k+10],S13,4294925233);b=FF(b,c,d,a,x[k+11],S14,2304563134);a=FF(a,b,c,d,x[k+12],S11,1804603682);d=FF(d,a,b,c,x[k+13],S12,4254626195);c=FF(c,d,a,b,x[k+14],S13,2792965006);b=FF(b,c,d,a,x[k+15],S14,1236535329);a=GG(a,b,c,d,x[k+1],S21,4129170786);d=GG(d,a,b,c,x[k+6],S22,3225465664);c=GG(c,d,a,b,x[k+11],S23,643717713);b=GG(b,c,d,a,x[k+0],S24,3921069994);a=GG(a,b,c,d,x[k+5],S21,3593408605);d=GG(d,a,b,c,x[k+10],S22,38016083);c=GG(c,d,a,b,x[k+15],S23,3634488961);b=GG(b,c,d,a,x[k+4],S24,3889429448);a=GG(a,b,c,d,x[k+9],S21,568446438);d=GG(d,a,b,c,x[k+14],S22,3275163606);c=GG(c,d,a,b,x[k+3],S23,4107603335);b=GG(b,c,d,a,x[k+8],S24,1163531501);a=GG(a,b,c,d,x[k+13],S21,2850285829);d=GG(d,a,b,c,x[k+2],S22,4243563512);c=GG(c,d,a,b,x[k+7],S23,1735328473);b=GG(b,c,d,a,x[k+12],S24,2368359562);a=HH(a,b,c,d,x[k+5],S31,4294588738);d=HH(d,a,b,c,x[k+8],S32,2272392833);c=HH(c,d,a,b,x[k+11],S33,1839030562);b=HH(b,c,d,a,x[k+14],S34,4259657740);a=HH(a,b,c,d,x[k+1],S31,2763975236);d=HH(d,a,b,c,x[k+4],S32,1272893353);c=HH(c,d,a,b,x[k+7],S33,4139469664);b=HH(b,c,d,a,x[k+10],S34,3200236656);a=HH(a,b,c,d,x[k+13],S31,681279174);d=HH(d,a,b,c,x[k+0],S32,3936430074);c=HH(c,d,a,b,x[k+3],S33,3572445317);b=HH(b,c,d,a,x[k+6],S34,76029189);a=HH(a,b,c,d,x[k+9],S31,3654602809);d=HH(d,a,b,c,x[k+12],S32,3873151461);c=HH(c,d,a,b,x[k+15],S33,530742520);b=HH(b,c,d,a,x[k+2],S34,3299628645);a=II(a,b,c,d,x[k+0],S41,4096336452);d=II(d,a,b,c,x[k+7],S42,1126891415);c=II(c,d,a,b,x[k+14],S43,2878612391);b=II(b,c,d,a,x[k+5],S44,4237533241);a=II(a,b,c,d,x[k+12],S41,1700485571);d=II(d,a,b,c,x[k+3],S42,2399980690);c=II(c,d,a,b,x[k+10],S43,4293915773);b=II(b,c,d,a,x[k+1],S44,2240044497);a=II(a,b,c,d,x[k+8],S41,1873313359);d=II(d,a,b,c,x[k+15],S42,4264355552);c=II(c,d,a,b,x[k+6],S43,2734768916);b=II(b,c,d,a,x[k+13],S44,1309151649);a=II(a,b,c,d,x[k+4],S41,4149444226);d=II(d,a,b,c,x[k+11],S42,3174756917);c=II(c,d,a,b,x[k+2],S43,718787259);b=II(b,c,d,a,x[k+9],S44,3951481745);a=addUnsigned(a,AA);b=addUnsigned(b,BB);c=addUnsigned(c,CC);d=addUnsigned(d,DD);}
var tempValue=wordToHex(a)+wordToHex(b)+wordToHex(c)+wordToHex(d);return tempValue.toLowerCase();}}
var Cookie=function(){var cookie={};this.get=function(key){var data=cookie[key];if(!data){var json=document.cookie.match(new RegExp("(^| )"+key+"=([^;]*)(;|$)"));if(json){data=cookie[key]=JSON.parse(json[2]);}}
if(data){if(data.expires>0&&(Date.parse(new Date())/1000)-data.timestamp>=data.expires){this.del(key);}else{return data.value;}}
return null;}
this.set=function(key,value,expires){if(typeof expires!="number"){expires=0;}
var data={expires:expires,timestamp:Date.parse(new Date())/1000,value:value};cookie[key]=data;if(expires&&expires>0){var exp=new Date();exp.setTime(exp.getTime()+expires*1000);document.cookie=key+"="+JSON.stringify(data)+"; expires="+exp.toGMTString()+"; path=/";}else{document.cookie=key+"="+JSON.stringify(data)+"; path=/";}}
this.del=function(key){var exp=new Date();exp.setTime(exp.getTime()-1);delete cookie[key];document.cookie=key+"=null; expires="+exp.toGMTString()+"; path=/";}}
var Dates=function(){this.format=function(dateObject,format){var o={"M+":dateObject.getMonth()+1,"d+":dateObject.getDate(),"h+":dateObject.getHours(),"m+":dateObject.getMinutes(),"s+":dateObject.getSeconds(),"q+":Math.floor((dateObject.getMonth()+3)/3),"S":dateObject.getMilliseconds()}
if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(dateObject.getFullYear()+"").substr(4-RegExp.$1.length));}
for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length));}}
return format;}
this.getDay=function(dateObject){var days=["周日","星期一","星期二","星期三","星期四","星期五","周六"];return days[dateObject.getDay()];}
this.getDate=function(dateObject){return new Date(dateObject.getFullYear(),dateObject.getMonth()+1,0).getDate();}
this.currentWeek=function(dateObject){var totalDays=0;var days=[31,28,31,30,31,30,31,31,30,31,30,31];days[1]=(Math.round(dateObject.getYear()/4)==dateObject.getYear()/4)?29:28;if(dateObject.getMonth()==0){totalDays=totalDays+dateObject.getDate();}else{var curMonth=dateObject.getMonth();for(var count=1;count<=curMonth;count++){totalDays+=days[count-1];}
totalDays+=dateObject.getDate();}
var n=7-new Date(dateObject.getFullYear()+"-01-01").getDay()+1;if(totalDays<n){return 1;}
var week=Math.floor((totalDays-n)/7)+2;if(new Date(dateObject.getFullYear()+"-12-31").getDay()==6){return week}
return week>52?1:week;}
this.dateDiffWeek=function(objDate1,objDate2){var objDate1,objDate2,intDays;intDays=parseInt(Math.abs(objDate1-objDate2)/1000/60/60/24);intDays=intDays+1;var WeekNum=parseInt(intDays/7);if(WeekNum<=0&&objDate1>objDate2){WeekNum=1;}
return WeekNum;}
this.secondToDate=function(second){if(second<60){return second+" 秒 ";}
var d,w,m,s,r="";d=w=m=s=0;if(second<3600){m=Math.floor(second/60);s=second-m*60;}else if(second<86400){w=Math.floor(second/3600);m=Math.floor((second-w*3600)/60);s=second-(w*3600+m*60);}else{d=Math.floor(second/86400);w=Math.floor((second-d*86400)/3600);m=Math.floor((second-(d*86400+w*3600))/60);s=second-(d*86400+w*3600+m*60);}
if(d){r=d+" 天 ";}
if(w){r+=w+" 小时 ";}
if(m){r+=m+" 分钟 ";}
if(s){r+=s+" 秒 ";}
return r;}}
var Server=function(){var uniqueId=0;this.call=function(url,param,cb){var reqId=++uniqueId;var startTime=new Date().getTime();$.ajax({timeout:60000,url:url,data:param?JSON.stringify(param):null,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(data){if(typeof cb=="function"){cb(reqId,data,new Date().getTime()-startTime);}},error:function(XMLHttpRequest,textStatus,errorThrown){if(typeof cb=="function"){cb(0,"status:["+textStatus+"] error:["+errorThrown+"]",new Date().getTime()-startTime);}},cache:false});return reqId;}}
var Regex=function(){this.checkMobile=/^1\d{10}$/;this.checkPhone=/^((0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?)|^1\d{10}$/;this.checkTel=/^((\(\d{3}\))|(\d{3}\-))?13\d{9}|15\d{9}|18\d{9}$/;this.checkNumber=/[^\d]/g;this.checkFax=/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})$/;this.checkUrl=/^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+.?$/;this.checkEmail=/^[a-zA-Z0-9]+[_a-zA-Z0-9-]*(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,6})$/;this.checkPwd=/^[a-zA-Z0-9]{6,12}$/;this.checkAZ09=/^[a-zA-Z0-9\-\_]+$/;this.check09=/^[0-9\-]+$/;this.checkChar=/^[\w\u4e00-\u9fa5]+$/gi;this.checkDate=/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/i;}
var Str=function(){this.getBLen=function(str){if(str==null)return 0;if(typeof str!="string"){str+="";}
return str.replace(/[^\x00-\xff]/g,"01").length;}
this.brief=function(txt,len){if(self.getBLen(txt)/2>len&&len>=2){var s=txt.substr(0,Math.floor(len/2));var e=txt.substr(txt.length-Math.ceil(len/2),txt.length);return s+"****"+e;}
return txt;}}
var Browser=function(){var u=navigator.userAgent;this.isIE=u.indexOf('Trident')>-1;this.isOP=u.indexOf('Chrome')>-1;this.isFF=u.indexOf('Firefox')>-1;this.webKit=u.indexOf('AppleWebKit')>-1;this.mobile=!!u.match(/AppleWebKit.*Mobile.*/);this.ios=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);this.android=u.indexOf('Android')>-1||u.indexOf('Linux')>-1;this.iPhone=u.indexOf('iPhone')>-1||u.indexOf('Mac')>-1;this.iPad=u.indexOf('iPad')>-1;this.webApp=u.indexOf('Safari')==-1;}
this.sync=new Sync();this.url=new Url();this.storage=new Storage();this.md5=new Md5();this.cookie=new Cookie();this.date=new Dates();this.server=new Server();this.regex=new Regex();this.str=new Str();this.browser=new Browser();}});