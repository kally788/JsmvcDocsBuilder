var js;if(!js){js={}};if(!js.model){js.model={}};if(!js.page){js.page={}};if(!js.tpl){js.tpl={}};
js.model.ContList=function(){var protected;this.onCreate=function(p){protected=p;p.setData({"$jsmvc$.run":{statement:"class",desc:"$jsmvc$/run.js 是一个全局的对象，进入页面时将立即被创建，该对象用于加载资源和启动框架。需在 index.html 中加载该JS脚本。",example:[{desc:"启动框架方式",code:"    $.extend(new function(){\n\
\n\
        //继承 FacadeAbs 抽象类\n\
        core.FacadeAbs.call(this);\n\
\n\
        //自定义广播名称，也可以单独定义到一个JS文件中\n\
        this.CONTRO_CHANGE_GREET = \"contro_change_greet\";\n\
\n\
        //重新抽象类中的 facadeRun 方法，并注册您的项目代码到相关的模块上\n\
        this.facadeRun = function (html){\n\
            this.supers.facadeRun(html);\n\
            //注册各个模块，可以一次性注册或者在使用到相关模块时注册\n\
            this.regContro(\"contro.Example\", $.CONTRO_CHANGE_GREET);\n\
            this.regModel(\"model.Hi\");\n\
            this.regPage(\"page.HelloWorld\");\n\
        }\n\
\n\
    });"}],exte:"$jsmvc$.core.FacadeAbs",func:{pub:[{name:"loading",desc:"当框架开始加载资源时，该方法会被持续调用，直到完成所有的资源加载。您可以在 index.html 的 script 标签中重写该方法。 ",param:[{name:"total",type:"number",desc:" 总加载进度"},{name:"abc",type:"number",desc:" 总加载进度"}],ret:{type:"string",desc:"返回描述"},example:[]}],pro:[{name:"loading2",desc:"当框架开始加载资源时，该方法会被持续调用，直到完成所有的资源加载。您可以在 index.html 的 script 标签中重写该方法。 ",param:[{name:"total",type:"number",desc:" 总加载进度"},{name:"abc",type:"number",desc:" 总加载进度"}],ret:{type:"string",desc:"返回描述"},example:[]}],sta:[{name:"loading3",desc:"当框架开始加载资源时，该方法会被持续调用，直到完成所有的资源加载。您可以在 index.html 的 script 标签中重写该方法。 ",param:[{name:"total",type:"number",desc:" 总加载进度"},{name:"abc",type:"number",desc:" 总加载进度"}],ret:{type:"string",desc:"返回描述"},example:[]}]},evt:{pub:[{name:"loadingEEE",desc:"当框架开始加载资源时，该方法会被持续调用，直到完成所有的资源加载。您可以在 index.html 的 script 标签中重写该方法。 ",param:[{name:"data",type:"object",desc:" 供事件回调数据"},{name:"callback",type:"function",desc:" 事件回调"}],ret:{type:"string",desc:"返回描述"},example:[]}],pro:[{name:"loadingEEE2",desc:"当框架开始加载资源时，该方法会被持续调用，直到完成所有的资源加载。您可以在 index.html 的 script 标签中重写该方法。 ",param:[{name:"data",type:"object",desc:" 供事件回调数据"},{name:"callback",type:"function",desc:" 事件回调"}],ret:{type:"string",desc:"返回描述"},example:[]}]},attr:{pub:[{name:"test",desc:"测试专用属性",type:"number"},{name:"test2",desc:"测试专用属性",type:"number"}],pro:[{name:"test3",desc:"测试专用属性",type:"number"}],sta:[{name:"test4",desc:"测试专用属性",type:"number"}]},notice:[{name:"notice_test",desc:"广播通知",type:"number"}]}});}
this.getList=function(){return protected.getData();}}
js.model.MenuList=function(){var protected;this.onCreate=function(p){protected=p;p.setData([{name:"$jsmvc$",list:["run"]},{name:"$jsmvc$.core",list:["FacadeAbs","ModelAbs","PageAbs"]}]);}
this.getList=function(){return protected.getData();}}
js.page.Cont=function(){var self=this;var html;var protected;this.onCreate=function(p){protected=p;html=p.setDisplay($(js.tpl.ContTpl()));p.setStage($jsmvc$.facade.reqPage("js.page.Layout").getRight());var ls=html.find("*[id]");var len=ls.length;for(var i=0;i<len;i++){html[ls[i].id]=$(ls[i]);}}
this.showPage=function(className){self.supers.showPage();var data=$jsmvc$.facade.reqModel("js.model.ContList").getList()[className];if(!data){html.notDoc.html("没有"+(className?className:"相关")+"类的文档！~");html.notDoc.show();html.classMain.hide();html.funcMain.hide();return;}
html.notDoc.hide();html.classMain.show();html.funcMain.show();html.class_name.html(className);if(data.desc){html.class_desc.show();html.class_desc.children("p").html(data.desc);}else{html.class_desc.hide();}
if(data.example&&data.example.length>0){html.class_example.show();html.class_example.children(":gt(0)").remove();for(var i=0;i<data.example.length;i++){var exa=data.example[i];var pItem=html.class_example_desc.clone();var preItem=html.class_example_code.clone();pItem.html(exa.desc?exa.desc:"");preItem.html(exa.code?exa.code:"<!-- 没有示例代码 -->");html.class_example.append(pItem);html.class_example.append(preItem);}}else{html.class_example.hide();}
if(data.statement=="object"){if(data.func){delete data.func.pro;delete data.func.sta;}
if(data.attr){delete data.attr.pro;delete data.attr.sta;}
if(data.evt){delete data.evt.pro;}}
if(data.func&&((data.func.pub&&data.func.pub.length>0)||(data.func.pro&&data.func.pro.length>0)||(data.func.sta&&data.func.sta.length>0))||data.attr&&((data.attr.pub&&data.attr.pub.length>0)||(data.attr.pro&&data.attr.pro.length>0)||(data.attr.sta&&data.attr.sta.length>0))||data.evt&&((data.evt.pub&&data.evt.pub.length>0)||(data.evt.pro&&data.evt.pro.length>0))||(data.notice&&data.notice.length>0)){html.class_member.show();html.class_member.children(":gt(0)").remove();function createFunc(type,evt){var func=html.class_member_func.clone();var func_item=func.find("tr:eq(1)").clone();func.find("tr:eq(0)").children("th:eq(0)").html((data.statement=="object"?"对象"+(evt?"事件":"方法"):(evt?"事件 ":"方法 ")+(type=="pub"?"[ 公共 ]":(type=="pro"?"[ 保护 ]":"[ 静态 ]"))));func.find("tr:gt(0)").remove();for(var i=0;i<data.func[type].length;i++){var func_item_new=func_item.clone();var itemData=data[evt?"evt":"func"][type][i];var funcName=(type=="sta"||data.statement=="object"?className:(type=="pro"?"protected":"this"))+"."+itemData.name+" ( ";for(var j=0;itemData.param&&j<itemData.param.length;j++){funcName+=(j>0?", ":"")+itemData.param[j].name;}
func_item_new.children("td:eq(0)").html("<a href=\"#"+itemData.name+"\">"+funcName+" ) </a>");func_item_new.children("td:eq(1)").html(itemData.desc);func.append(func_item_new);}
html.class_member.append(func);}
if(data.func&&data.func.pub&&data.func.pub.length>0){createFunc("pub",false);}
if(data.func&&data.func.pro&&data.func.pro.length>0){createFunc("pro",false);}
if(data.func&&data.func.sta&&data.func.sta.length>0){createFunc("sta",false);}
if(data.evt&&data.evt.pub&&data.evt.pub.length>0){createFunc("pub",true);}
if(data.evt&&data.evt.pro&&data.evt.pro.length>0){createFunc("pro",true);}
function createAttr(type,notice){var attr=html.class_member_attr.clone();var attr_item=attr.find("tr:eq(1)").clone();attr.find("tr:eq(0)").children("th:eq(0)").html((data.statement=="object"?"对象"+(notice?"广播":"属性"):notice?"广播":"属性 "+(type=="pub"?"[ 公共 ]":(type=="pro"?"[ 保护 ]":"[ 静态 ]"))));attr.find("tr:gt(0)").remove();for(var i=0;i<(notice?data.notice.length:data.attr[type].length);i++){var attr_item_new=attr_item.clone();var itemData=notice?data.notice[i]:data.attr[type][i];var funcName=notice?itemData.name:(type=="sta"||data.statement=="object"?className:(type=="pro"?"protected":"this"))+"."+itemData.name;attr_item_new.children("td:eq(0)").html(funcName);attr_item_new.children("td:eq(1)").html(itemData.type);attr_item_new.children("td:eq(2)").html(itemData.desc);attr.append(attr_item_new);}
html.class_member.append(attr);}
if(data.attr&&data.attr.pub&&data.attr.pub.length>0){createAttr("pub");}
if(data.attr&&data.attr.pro&&data.attr.pro.length>0){createAttr("pro");}
if(data.attr&&data.attr.sta&&data.attr.sta.length>0){createAttr("sta");}
if(data.notice&&data.notice.length>0){createAttr(null,true);}}else{html.class_member.hide();}
if(data.exte){html.class_exte.show();var a=html.class_exte.children("a:eq(0)");a.html(data.exte);a.off("click").on("click",function(){self.showPage(data.exte);});}else{html.class_exte.hide();}
SyntaxHighlighter.defaults.gutter=false;SyntaxHighlighter.highlight();}}
js.page.Layout=function(){var self=this;var left;var right;var protected;this.onCreate=function(p){protected=p;p.setStage(document.body);var html=protected.setDisplay($(js.tpl.LayoutTpl()));var ls=html.find("*[id]");var len=ls.length;for(var i=0;i<len;i++){html[ls[i].id]=$(ls[i]);}
left=html.left;right=html.right;}
this.getLeft=function(){return left;}
this.getRight=function(){return right;}
var changeWindows=function(){var win=$(window);var width=win.width();var height=win.height();left.css({height:height+"px",width:width*0.2+"px"});right.css({height:height+"px"});$jsmvc$.facade.sendBroadcast($jsmvc$.facade.WINDOW_RESIZE,{width:width,height:height});}
this.showPage=function(){self.supers.showPage();$(window).off("resize",changeWindows).on("resize",changeWindows).trigger("resize");}}
js.page.Menu=function(){var self=this;var html;var protected;this.onCreate=function(p){protected=p;html=p.setDisplay($(js.tpl.MenuTpl()));p.setStage($jsmvc$.facade.reqPage("js.page.Layout").getLeft());var ls=html.find("*[id]");var len=ls.length;for(var i=0;i<len;i++){html[ls[i].id]=$(ls[i]);}
var list=$jsmvc$.facade.reqModel("js.model.MenuList").getList();var ul=html.children("ul");ul.empty();if(!list||typeof list!="object"||list.length==0){$jsmvc$.facade.reqPage("js.page.Cont").showPage();}else{for(var i=0;i<list.length;i++){var item=html.tpl.clone();var data=list[i];var span=item.children("span");span.html(data.name);if(!data.list||typeof data.list!="object"||data.list.length<1){item.children("ul").remove();item.removeClass("file");item.addClass("js");span.on("click",(function(className){return function(){select(className,$(this));}})(data.name));if(i==0){span.trigger("click");}}else{item.removeClass("js");item.addClass("file");var childUL=item.find("ul:eq(0)");var childLI=childUL.children("li:eq(0)");childUL.empty();for(var j=0;j<data.list.length;j++){var childLIItem=childLI.clone();var childSpan=childLIItem.children("span");childSpan.html(data.list[j]);childSpan.on("click",(function(className){return function(){select(className,$(this));}})(data.name+"."+data.list[j]));childUL.append(childLIItem);if(i==0&&j==0){childSpan.trigger("click");}}
if(i!=0){childUL.hide();childUL.attr("hide",true);}
span.on("click",function(){html.css({width:"auto"});html.removeClass("menuBlock");html.addClass("menuInline");var ul=$(this).next("ul");if(ul.attr("hide")=="true"){ul.show();ul.attr("hide",false);}else{ul.hide();ul.attr("hide",true);}
html.css({width:html.innerWidth()+"px"});html.removeClass("menuInline");html.addClass("menuBlock");});}
ul.append(item);}}}
var select=function(className,obj){html.find(".opt").removeClass("opt");obj.parent().addClass("opt");$jsmvc$.facade.reqPage("js.page.Cont").showPage(className);}
this.showPage=function(){self.supers.showPage();html.css({width:html.innerWidth()+"px"});html.removeClass("menuInline");html.addClass("menuBlock");}}
js.tpl.ContTpl=function(){return'<div class="cont">\
        <h1 id="notDoc"></h1>\
        <div id="classMain">\
            <h1 id="class_name"><!--类名--></h1>\
            <div id="class_desc">\
                <h2>摘要：</h2>\
                <p><!--类描述--></p>\
            </div>\
            <div id="class_example">\
                <h2>示例：</h2>\
                <p id="class_example_desc"><!--示例说明--></p>\
                <pre class="brush: jscript;" id="class_example_code"><!--类使用示例--></pre>\
            </div>\
            <div id="class_member">\
                <h2>成员：</h2>\
                <table cellspacing="0" cellpadding="3" border="1" id="class_member_func">\
                    <tr><th width="30%">公共方法</th><th width="70%">说明</th></tr>\
                    <tr>\
                        <td><a href="#" title=""><!--方法名称--></a></td>\
                        <td><!--方法概要--></td>\
                    </tr>\
                </table>\
                <table cellspacing="0" cellpadding="3" border="1" id="class_member_attr">\
                    <tr><th width="30%">公共属性</th><th width="10%">类型</th><th width="60%">说明</th></tr>\
                    <tr id="">\
                        <td><!--属性名称--></td>\
                        <td><!--属性类型--></td>\
                        <td><!--属性说明--></td>\
                    </tr>\
                </table>\
            </div>\
            <div id="class_exte">\
                <h2>继承：</h2>\
                <a href="#"><!--继承类名称--></a>\
            </div>\
            <hr />\
        </div>\
\
        <!-- 方法模版 -->\
\
        <div id="funcMain">\
            <h3 id="func_name"><!--方法名称--></h3>\
            <div id="func_desc">\
                <h4>方法摘要：</h4>\
                <p><!--方法描述--></p>\
            </div>\
            <div id="func_io">\
                <table cellspacing="0" cellpadding="3" border="1" id="func_io_param">\
                    <tr><th width="30%">参数</th><th width="10%">类型</th><th width="60%">说明</th></tr>\
                    <tr>\
                        <td><!--参数名称--></td>\
                        <td><!--参数类型--></td>\
                        <td><!--参数说明--></td>\
                    </tr>\
                </table>\
                <table cellspacing="0" cellpadding="3" border="1" i="func_io_ret">\
                    <tr><th width="30%">返回</th><th width="70%">说明</th></tr>\
                    <tr>\
                        <td><!--返回类型--></td>\
                        <td><!--返回描述--></td>\
                    </tr>\
                </table>\
            </div>\
            <div id="func_state">\
                <h2>声明：</h2>\
                <p><!--成员声明 公共、保护、静态--></p>\
            </div>\
            <div id="func_example">\
                <h4>示例1：</h4>\
                <pre class="brush: jscript;"><!--方法使用示例--></pre>\
            </div>\
            <hr />\
        </div>\
        <div class="jsmvcDocs">@2016 <span>JsMVC.cn - by JsMVC DocsBuilder</span></div>\
    </div>\
    ';}
js.tpl.LayoutTpl=function(){return'<div class="layout">\
        <div id="left"></div>\
        <div id="right"></div>\
        <div id="clear"></div>\
    </div>\
    ';}
js.tpl.MenuTpl=function(){return'<div class="menu menuInline">\
        <ul>\
            <li class="js opt"><span>run</span></li>\
            <li class="file" id="tpl">\
                <span>core</span>\
                <ul>\
                    <li class="js"><span>FacadeAbs</span></li>\
                    <li class="js"><span>ModelAbs</span></li>\
                    <li class="js"><span>PageAbs</span></li>\
                </ul>\
            </li>\
        </ul>\
    </div>\
    ';}